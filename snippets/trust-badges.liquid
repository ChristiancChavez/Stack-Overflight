{%- comment -%}
  Trust Badges Snippet
  
  Usage:
  {% render 'trust-badges',
    badge_1_text: 'Free Shipping',
    badge_1_icon: 'icon-url',
    badge_1_link: '/pages/shipping',
    badge_2_text: 'Secure Payment',
    badge_2_icon: 'icon-url',
    badge_2_link: '/pages/payment',
    badge_3_text: '30-Day Returns',
    badge_3_icon: 'icon-url',
    badge_3_link: '/pages/returns',
    layout: 'horizontal',
    alignment: 'center',
    icon_size: 'medium',
    show_icons: true,
    spacing: 'medium',
    class_name: 'custom-class'
  %}
{%- endcomment -%}

{%- liquid
  # Default values
  assign layout = layout | default: 'horizontal'
  assign alignment = alignment | default: 'center'
  assign icon_size = icon_size | default: 'medium'
  assign show_icons = show_icons | default: true
  assign spacing = spacing | default: 'medium'
  assign class_name = class_name | default: ''
  
  # Collect badges (up to 6)
  assign badge_count = 0
  assign badges = ''
  
  for i in (1..6)
    assign badge_text = ''
    assign badge_icon = ''
    assign badge_link = ''
    
    if i == 1
      assign badge_text = badge_1_text
      assign badge_icon = badge_1_icon
      assign badge_link = badge_1_link
    elsif i == 2
      assign badge_text = badge_2_text
      assign badge_icon = badge_2_icon
      assign badge_link = badge_2_link
    elsif i == 3
      assign badge_text = badge_3_text
      assign badge_icon = badge_3_icon
      assign badge_link = badge_3_link
    elsif i == 4
      assign badge_text = badge_4_text
      assign badge_icon = badge_4_icon
      assign badge_link = badge_4_link
    elsif i == 5
      assign badge_text = badge_5_text
      assign badge_icon = badge_5_icon
      assign badge_link = badge_5_link
    elsif i == 6
      assign badge_text = badge_6_text
      assign badge_icon = badge_6_icon
      assign badge_link = badge_6_link
    endif
    
    if badge_text != blank
      assign badge_count = badge_count | plus: 1
      assign badge_html = '<div class="trust-badge trust-badge--icon-' | append: icon_size | append: ' trust-badge--card">'
      
      if show_icons and badge_icon != blank
        assign badge_html = badge_html | append: '<div class="trust-badge__icon"><img src="' | append: badge_icon | append: '" alt="' | append: badge_text | append: '" loading="lazy"></div>'
      endif
      
      assign badge_content = '<div class="trust-badge__text">' | append: badge_text | append: '</div>'
      
      if badge_link != blank
        assign is_external = false
        if badge_link contains 'http://' or badge_link contains 'https://'
          assign is_external = true
        endif
        
        assign link_attrs = 'href="' | append: badge_link | append: '"'
        if is_external
          assign link_attrs = link_attrs | append: ' target="_blank" rel="noopener noreferrer"'
        endif
        
        assign badge_html = badge_html | append: '<a class="trust-badge__link" ' | append: link_attrs | append: '>' | append: badge_content | append: '</a>'
      else
        assign badge_html = badge_html | append: badge_content
      endif
      
      assign badge_html = badge_html | append: '</div>'
      assign badges = badges | append: badge_html
    endif
  endfor
-%}

{%- if badge_count > 0 -%}
  <div 
    class="trust-badges trust-badges--{{ layout }} trust-badges--align-{{ alignment }} trust-badges--spacing-{{ spacing }} {{ class_name }}"
  >
    {{ badges }}
  </div>

  <style>
    .trust-badges {
      display: flex;
      flex-wrap: wrap;
      gap: var(--gap-md);
    }

    .trust-badges--horizontal {
      flex-direction: row;
    }

    .trust-badges--vertical {
      flex-direction: column;
    }

    .trust-badges--align-left {
      justify-content: flex-start;
    }

    .trust-badges--align-center {
      justify-content: center;
    }

    .trust-badges--align-right {
      justify-content: flex-end;
    }

    .trust-badges--spacing-small {
      gap: var(--gap-sm);
    }

    .trust-badges--spacing-medium {
      gap: var(--gap-md);
    }

    .trust-badges--spacing-large {
      gap: var(--gap-lg);
    }

    .trust-badge {
      display: flex;
      align-items: center;
      gap: var(--gap-xs);
    }

    .trust-badge--card {
      background: var(--color-background, #fff);
      border: 1px solid var(--color-border, rgba(0, 0, 0, 0.1));
      border-radius: 8px;
      padding: var(--padding-md);
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      transition: all 0.2s ease;
      flex-direction: column;
      align-items: center;
      text-align: center;
      gap: var(--gap-sm);
    }

    .trust-badge--card:hover {
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
      transform: translateY(-1px);
    }

    .trust-badge__icon {
      flex-shrink: 0;
    }

    .trust-badge__icon img {
      display: block;
    }

    .trust-badge--icon-small .trust-badge__icon img {
      width: 16px;
      height: 16px;
    }

    .trust-badge--icon-medium .trust-badge__icon img {
      width: 24px;
      height: 24px;
    }

    .trust-badge--icon-large .trust-badge__icon img {
      width: 32px;
      height: 32px;
    }

    .trust-badge__text {
      font-size: var(--font-size--sm);
      line-height: var(--font-line-height--sm);
    }

    .trust-badge__link {
      text-decoration: none;
      color: inherit;
      display: flex;
      align-items: center;
      gap: var(--gap-xs);
    }

    .trust-badge--card .trust-badge__link {
      flex-direction: column;
      align-items: center;
      gap: var(--gap-sm);
    }

    .trust-badge__link:hover {
      opacity: 0.8;
    }

    @media screen and (max-width: 749px) {
      .trust-badges--horizontal {
        justify-content: center;
      }
    }
  </style>
{%- endif -%}
